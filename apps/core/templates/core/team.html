{% extends "base.html" %}
{% block title %}Team Members - {{ business.name }}{% endblock %}

{% block content %}
<div x-data="{ showModal: false, actionUrl: '' }">
  <div class="max-w-4xl mx-auto px-4 py-10 space-y-6">

    <!-- Header -->
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-3xl font-bold text-blue-500">Team Members</h1>
      <a href="{% url 'business_settings' business.slug %}"
         class="px-4 py-2 bg-blue-100 text-gray-600 text-sm font-medium rounded hover:bg-blue-200 transition">
        ← Back to Settings
      </a>
    </div>

    <!-- Messages -->
    {% include "core/partials/_messages.html" %}


    <!-- Team Table -->
    {% include "core/partials/_team_table.html" %}

    <!-- Invite Button for Admins/Owners -->
    {% if request.user.role == 'admin' or user.role == 'business_owner' %}
    <div class="mt-6 text-right">
      <a href="#"
         hx-get="{% url 'invite_team_member' business.slug %}"
         hx-target="body"
         hx-swap="beforeend"
         class="inline-block px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 text-sm font-medium">
        ➕ Invite Member
      </a>
    </div>
    {% endif %}

  </div>
  {% include "core/partials/_remove_user.html" %}
</div>
<!-- HTMX Target for Modal -->
<div id="invite-member-modal-container"></div>
{% endblock %}
